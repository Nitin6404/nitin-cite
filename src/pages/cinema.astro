---
import CinemaComponent from "../cinema";
import Layout from "../layouts/layout.astro";
import { fetchGitHubReadme } from "../lib/server-github";
import { parseMoviesFromReadme, type CinemaData } from "../lib/github";

const siteTitle = "cinema";
const description = "suggest some great cinema";

let cinemaData: CinemaData = {
  movies: [],
  webShows: [],
  animes: [],
  gallery: [],
};

try {
  const readme = await fetchGitHubReadme("nitin6404", "movies-list");
  cinemaData = parseMoviesFromReadme(readme);
} catch (error) {
  console.error("Error fetching cinema data:", error);
}
---

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="icon" href="/favicon.svg" />
  <meta name="description" content={description} />
  <meta property="twitter:title" content=" nitin " />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@nitinnennn" />
  <meta property="og:title" content={siteTitle} />
  <meta property="og:description" content={description} />
  <meta property="og:site_name" content="nitin.vimmer.chat" />
  <meta property="og:url" content="https://nitin.vimmer.chat" />
  <title>{siteTitle}</title>
</head>

<Layout>
  <CinemaComponent initialData={cinemaData} client:load />
</Layout>
