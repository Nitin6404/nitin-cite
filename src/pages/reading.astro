---
import ReadingList from "../components/ui/ReadingList";
import Layout from "../layouts/layout.astro";
import { fetchGitHubReadme } from "../lib/server-github";
import { parseReadingFromReadme } from "../lib/github";

const siteTitle = "reading";
const description = "books, manga, web novels and more";

let readingItems: Array<{
  title: string;
  type: "book" | "manga" | "web-novel";
  description?: string;
  link?: string;
}> = [];

try {
  const readme = await fetchGitHubReadme("nitin6404", "reading-list");
  readingItems = parseReadingFromReadme(readme);
} catch (error) {
  console.error("Error fetching reading list:", error);
}
---

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="icon" href="/favicon.svg" />
  <meta name="description" content={description} />
  <meta property="twitter:title" content=" nitin " />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@nitinnennn" />
  <meta property="og:title" content={siteTitle} />
  <meta property="og:description" content={description} />
  <meta property="og:site_name" content="nitin.vimmer.chat" />
  <meta property="og:url" content="https://nitin.vimmer.chat" />
  <title>{siteTitle}</title>
</head>

<Layout>
  <ReadingList initialItems={readingItems} client:load />
</Layout>
